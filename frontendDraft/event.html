<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Event • DivDadRockEvents</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <header class="py-3 mb-3 border-bottom bg-white">
    <div class="container d-flex justify-content-between align-items-center">
      <div>
        <a href="index.html" class="fw-bold text-dark">DivDadRockEvents</a>
      </div>
      <nav class="d-flex gap-3">
        <a href="index.html" class="link-secondary">Home</a>
        <a href="create-event.html" class="link-secondary">Create Event</a>
        <a href="bookings.html" class="link-secondary">My Bookings</a>
      </nav>
    </div>
  </header>

  <main class="container pb-5">
    <a href="index.html" class="small link-secondary">← Back to events</a>

    <div class="row g-4 align-items-start mt-1">
      <div class="col-12 col-md-5 col-lg-4">
        <img id="eventCover" src="static/img/linkin-park-hybrid-theory.jpg" alt="Hybrid Theory cover" class="cover">
      </div>
      <div class="col-12 col-md-7 col-lg-8">
        <h1 id="eventTitle" class="h3 mb-1">Linkin Park Aus Tour</h1>
        <div class="d-flex align-items-center gap-2 mb-2">
          <span id="statusBadge" class="badge bg-success">Open</span>
          <span class="badge bg-primary">Rock</span>
        </div>
        <ul class="list-unstyled meta mb-3">
          <li><strong>Date:</strong> Fri 10 Oct 2025</li>
          <li><strong>Time:</strong> 7:00–10:30pm</li>
          <li><strong>Venue:</strong> The Tivoli · Fortitude Valley</li>
          <li><strong>Tickets left:</strong> <span id="ticketsLeft">67</span></li>
        </ul>
        <p id="eventDesc" class="mb-4">Celebrate Linkin Park and Chester Bennington with hit songs from albums Meteora and Hybrid Theory</p>
      </div>
    </div>

    <section id="book" class="mt-5">
      <div class="row g-3">
        <div class="col-12 col-lg-7">
          <div class="card">
            <div class="card-body">
              <h2 class="h5">Book this event</h2>
              <div id="alertBox" class="alert d-none" role="alert"></div>
              <div class="row g-3 align-items-end">
                <div class="col-6 col-md-4">
                  <label for="qty" class="form-label">Tickets</label>
                  <input id="qty" type="number" class="form-control" min="1" value="1">
                </div>
                <div class="col-auto">
                  <button id="bookBtn" class="btn btn-success">Book</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-5">
          <div class="card">
            <div class="card-body">
              <h2 class="h5">Comments</h2>
              <ul id="commentList" class="list-group list-group-flush mb-3">
                <li class="list-group-item">
                  <strong>Ava</strong>
                  <div class="small text-muted">Posted 02 Sep 2025</div>
                  <div>Can't wait for Numb to play!</div>
                </li>
                <li class="list-group-item">
                  <strong>Sam</strong>
                  <div class="small text-muted">Posted 03 Sep 2025</div>
                  <div>How good is Hybrid Theory!</div>
                </li>
                <li class="list-group-item">
                  <strong>Jordan</strong>
                  <div class="small text-muted">Posted 04 Sep 2025</div>
                  <div>RIP Chester, we will honour you</div>
                </li>
              </ul>

              <form class="row g-2">
                <div class="col-12">
                  <label for="cName" class="form-label">Your name</label>
                  <input id="cName" class="form-control" type="text" placeholder="Name">
                </div>
                <div class="col-12">
                  <label for="cText" class="form-label">Comment</label>
                  <textarea id="cText" class="form-control" rows="2" placeholder="Write a comment"></textarea>
                </div>
                <div class="col-12">
                  <button type="button" class="btn btn-outline-primary" disabled>Post comment</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="border-top bg-white">
    <div class="container py-3 small text-muted">© 2025 Zane Cargill</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let ticketsRemaining = 67;

    const ticketsLeftEl = document.getElementById('ticketsLeft');
    const qtyEl = document.getElementById('qty');
    const alertBox = document.getElementById('alertBox');
    const statusBadge = document.getElementById('statusBadge');

    function showAlert(type, msg) {
      alertBox.className = 'alert alert-' + type;
      alertBox.textContent = msg;
      alertBox.classList.remove('d-none');
    }

    document.getElementById('bookBtn').addEventListener('click', () => {
      const qty = parseInt(qtyEl.value, 10) || 0;
      if (qty < 1) { showAlert('warning', 'Please enter at least 1 ticket.'); return; }
      if (qty > ticketsRemaining) {
        showAlert('danger', `Cannot book ${qty}. Only ${ticketsRemaining} tickets left.`);
        return;
      }

      const orderId = 'ID-' + Math.floor(100000 + Math.random() * 900000);
      ticketsRemaining -= qty;
      ticketsLeftEl.textContent = ticketsRemaining;
      showAlert('success', `Order confirmed: ID-${orderId} for ${qty} ticket(s).`);

      if (ticketsRemaining === 0) {
        statusBadge.className = 'badge bg-secondary';
        statusBadge.textContent = 'Sold Out';
        qtyEl.disabled = true;
        document.getElementById('bookBtn').disabled = true;
      }
    });
  </script>
</body>
</html>
